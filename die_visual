import plotly.express as px
from die import Die

while True:
    try:
        # Get the number of dice the user wants to roll
        num_dice = int(input("How many dice would you like to roll? (Enter a whole number greater than 0): "))
        if num_dice < 1:
            raise ValueError("The number of dice must be a whole number greater than 0.")
        
        # Get the number of sides for each die
        num_sides = int(input("How many sides would you like each die to have? (Enter a whole number greater than 1): "))
        if num_sides < 2:
            raise ValueError("The number of sides must be a whole number greater than 1.") 
        
        # If the user wants more than one die
        if num_dice > 1:
            # Creates the user's dice and adds them to a list for later use
            dice = [Die(num_sides) for _ in range(num_dice)]
            roll_die = input(f"Press enter to roll your {num_dice} dice with {num_sides} sides each: ")
            roll_total = 0
            if roll_die == "":
                for i, die in enumerate(dice, 1):
                    current_roll = die.roll_die()
                    roll_total += current_roll
                    print(f"Die {i} rolled: {current_roll}")
                print(f"Your {num_dice} dice with {num_sides} sides each rolled for a total of: {roll_total}")
                
                # either will work but the above is cleaner
                # die_counter = 1
                # for die in dice:
                #     print(f"Die {die_counter} rolled: {die.roll_die()}")
                #     die_counter += 1
        else:
            # If only one die is to be rolled
            die = Die(num_sides)
            roll_die = input(f"Press enter to roll your {num_sides} sided die: ")
            print(f"Your die rolled: {die.roll_die()}")
        
        while True:
            roll_again = input("Would you like to roll more dice? (y/n): ").lower()
            if roll_again == "y":
                break
            elif roll_again == "n":
                print("Goodbye!")
                exit()
            else:
                print("Invalid input! Please enter 'y' to roll again or 'n' to exit.")
        
    except ValueError as e:
        print(f"Oops, invalid value! Please try again with a valid number.")

